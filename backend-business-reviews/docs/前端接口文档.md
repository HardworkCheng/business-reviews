# å‰ç«¯æ¥å£æ–‡æ¡£

## é¡¹ç›®ï¼šç¾é£Ÿç‚¹è¯„ç³»ç»Ÿç§»åŠ¨ç«¯

**ç‰ˆæœ¬ï¼š** v1.0.0  
**æ›´æ–°æ—¶é—´ï¼š** 2024-12-03

---

## æ¥å£è§„èŒƒ

### åŸºç¡€URL

```
å¼€å‘ç¯å¢ƒ: http://localhost:8080/api
ç”Ÿäº§ç¯å¢ƒ: https://api.business-reviews.com/api
```

### è¯·æ±‚å¤´

```
Content-Type: application/json
Authorization: Bearer {token}  // éœ€è¦ç™»å½•çš„æ¥å£
```

### å“åº”æ ¼å¼

**æˆåŠŸå“åº”ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {}
}
```

**é”™è¯¯å“åº”ï¼š**
```json
{
  "code": 400,
  "message": "é”™è¯¯ä¿¡æ¯",
  "data": null
}
```

### çŠ¶æ€ç è¯´æ˜

| çŠ¶æ€ç  | è¯´æ˜ |
|-------|------|
| 200 | æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªç™»å½•æˆ–tokenè¿‡æœŸ |
| 403 | æ— æƒé™ |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨é”™è¯¯ |

---

## ä¸€ã€ç”¨æˆ·è®¤è¯æ¨¡å—

### 1.1 å‘é€éªŒè¯ç 

**æ¥å£åœ°å€ï¼š** `POST /auth/send-code`

**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "phone": "13800138000",
  "type": 1  // 1ç™»å½•ï¼Œ2æ³¨å†Œï¼Œ3é‡ç½®å¯†ç 
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "éªŒè¯ç å·²å‘é€",
  "data": null
}
```

---

### 1.2 éªŒè¯ç ç™»å½•

**æ¥å£åœ°å€ï¼š** `POST /auth/login-by-code`

**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "phone": "13800138000",
  "code": "123456"
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "userInfo": {
      "userId": "1001",
      "username": "ç¾é£Ÿæ¢åº—å°ç‹",
      "avatar": "https://example.com/avatar.jpg",
      "phone": "138****8000"
    }
  }
}
```

> è¯´æ˜ï¼šç™»å½•æ¥å£ä»…è¿”å›è„±æ•åçš„æ‰‹æœºå·ã€‚å¦‚éœ€å®Œæ•´æ‰‹æœºå·ï¼Œè¯·é€šè¿‡ `GET /user/phone` æ¥å£è·å–ï¼Œå¹¶ç¡®ä¿å…·å¤‡ç›¸åº”æƒé™ã€‚

---

### 1.3 ç¬¬ä¸‰æ–¹ç™»å½•

**æ¥å£åœ°å€ï¼š** `POST /auth/oauth-login`

**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "type": "wechat",  // wechat/qq/weibo
  "code": "oauth_code"
}
```

**å“åº”ç¤ºä¾‹ï¼š** åŒ1.2

---

### 1.4 é€€å‡ºç™»å½•

**æ¥å£åœ°å€ï¼š** `POST /auth/logout`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "é€€å‡ºæˆåŠŸ",
  "data": null
}
```

---

## äºŒã€ç”¨æˆ·ä¿¡æ¯æ¨¡å—

### 2.1 è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

**æ¥å£åœ°å€ï¼š** `GET /user/info`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "userId": "1001",
    "username": "ç¾é£Ÿæ¢åº—å°ç‹",
    "avatar": "https://example.com/avatar.jpg",
    "bio": "çƒ­çˆ±ç¾é£Ÿï¼Œå–œæ¬¢æ¢åº— ğŸœ",
    "phone": "138****8000",
    "gender": 1,
    "birthday": "1995-01-01",
    "followingCount": 128,
    "followerCount": 3456,
    "likeCount": 12345,
    "favoriteCount": 567,
    "noteCount": 89
  }
}
```

---

### 2.2 æ›´æ–°ç”¨æˆ·ä¿¡æ¯

**æ¥å£åœ°å€ï¼š** `PUT /user/info`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "username": "ç¾é£Ÿæ¢åº—å°ç‹",
  "avatar": "https://example.com/avatar.jpg",
  "bio": "çƒ­çˆ±ç¾é£Ÿï¼Œå–œæ¬¢æ¢åº—",
  "gender": 1,
  "birthday": "1995-01-01"
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": null
}
```

---

### 2.3 è·å–æˆ‘çš„ç¬”è®°åˆ—è¡¨

**æ¥å£åœ°å€ï¼š** `GET /user/notes`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**æŸ¥è¯¢å‚æ•°ï¼š**
```
pageNum=1&pageSize=10
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "id": "1001",
        "image": "https://example.com/note1.jpg",
        "title": "æ­å·è¶…å¥½åƒçš„çƒ¤è‚‰åº—ï¼äººå‡100+",
        "likes": 1234,
        "views": 5678,
        "createdAt": "2024-12-01 10:30:00"
      }
    ],
    "total": 89,
    "pageNum": 1,
    "pageSize": 10,
    "hasMore": true
  }
}
```

---

### 2.4 è·å–æˆ‘çš„æ”¶è—åˆ—è¡¨

**æ¥å£åœ°å€ï¼š** `GET /user/favorites`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**æŸ¥è¯¢å‚æ•°ï¼š**
```
type=1&pageNum=1&pageSize=10  // type: 1ç¬”è®°ï¼Œ2å•†å®¶
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "id": "1001",
        "type": 1,
        "targetId": "2001",
        "image": "https://example.com/note.jpg",
        "title": "ç¬”è®°æ ‡é¢˜",
        "createdAt": "2024-12-01 10:30:00"
      }
    ],
    "total": 567,
    "pageNum": 1,
    "pageSize": 10,
    "hasMore": true
  }
}
```

---

### 2.5 è·å–æµè§ˆå†å²

**æ¥å£åœ°å€ï¼š** `GET /user/history`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**æŸ¥è¯¢å‚æ•°ï¼š**
```
pageNum=1&pageSize=20
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "id": "1001",
        "type": 1,
        "targetId": "2001",
        "image": "https://example.com/note.jpg",
        "title": "ç¬”è®°æ ‡é¢˜",
        "createdAt": "2024-12-03 09:30:00"
      }
    ],
    "total": 100,
    "hasMore": true
  }
}
```

---

### 2.6 å…³æ³¨ç”¨æˆ·

**æ¥å£åœ°å€ï¼š** `POST /user/follow`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "userId": "1002"
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "å…³æ³¨æˆåŠŸ",
  "data": null
}
```

---

### 2.7 å–æ¶ˆå…³æ³¨

**æ¥å£åœ°å€ï¼š** `DELETE /user/follow/{userId}`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "å–æ¶ˆå…³æ³¨æˆåŠŸ",
  "data": null
}
```

---

## ä¸‰ã€ç¬”è®°æ¨¡å—

### 3.1 è·å–æ¨èç¬”è®°åˆ—è¡¨

**æ¥å£åœ°å€ï¼š** `GET /notes/recommended`

**æŸ¥è¯¢å‚æ•°ï¼š**
```
pageNum=1&pageSize=10
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "id": "1001",
        "image": "https://example.com/note1.jpg",
        "title": "æ­å·è¶…å¥½åƒçš„çƒ¤è‚‰åº—ï¼äººå‡100+",
        "author": "ç¾é£Ÿæ¢åº—å°ç‹",
        "authorAvatar": "https://example.com/avatar.jpg",
        "authorId": "2001",
        "likes": 1234,
        "views": 5678,
        "tag": "çƒ­é—¨",
        "tagClass": "tag-hot",
        "createdAt": "2024-12-01 10:30:00"
      }
    ],
    "pageNum": 1,
    "pageSize": 10,
    "hasMore": true
  }
}
```

---

### 3.2 è·å–ç¬”è®°è¯¦æƒ…

**æ¥å£åœ°å€ï¼š** `GET /notes/{id}`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": "1001",
    "image": "https://example.com/note1.jpg",
    "images": [
      "https://example.com/note1-1.jpg",
      "https://example.com/note1-2.jpg"
    ],
    "title": "æ­å·è¶…å¥½åƒçš„çƒ¤è‚‰åº—ï¼",
    "content": "è¿™å®¶åº—çœŸçš„å¤ªå¥½åƒäº†ï¼Œå¼ºçƒˆæ¨è...",
    "author": "ç¾é£Ÿæ¢åº—å°ç‹",
    "authorAvatar": "https://example.com/avatar.jpg",
    "authorId": "2001",
    "publishTime": "2å°æ—¶å‰",
    "tags": ["ç¾é£Ÿ", "æ¢åº—", "æ­å·"],
    "likeCount": 1234,
    "commentCount": 128,
    "viewCount": 3456,
    "favoriteCount": 567,
    "isLiked": false,
    "isBookmarked": false,
    "location": "æ­å·Â·ä¸Šå¡˜è·¯",
    "shopId": "3001",
    "shopName": "è”¡é¦¬æ´ªæ¶›çƒ¤è‚‰",
    "createdAt": "2024-12-01 10:30:00"
  }
}
```

---

### 3.3 å‘å¸ƒç¬”è®°

**æ¥å£åœ°å€ï¼š** `POST /notes`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "title": "ç¬”è®°æ ‡é¢˜",
  "content": "ç¬”è®°å†…å®¹",
  "images": [
    "https://example.com/image1.jpg",
    "https://example.com/image2.jpg"
  ],
  "shopId": "3001",
  "location": "æ­å·Â·ä¸Šå¡˜è·¯",
  "latitude": 30.2741,
  "longitude": 120.1551,
  "tags": ["ç¾é£Ÿ", "æ¢åº—"],
  "topics": ["1", "2"]
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "å‘å¸ƒæˆåŠŸ",
  "data": {
    "noteId": "1001"
  }
}
```

---

### 3.4 ç‚¹èµç¬”è®°

**æ¥å£åœ°å€ï¼š** `POST /notes/{id}/like`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "ç‚¹èµæˆåŠŸ",
  "data": {
    "likeCount": 1235
  }
}
```

---

### 3.5 å–æ¶ˆç‚¹èµç¬”è®°

**æ¥å£åœ°å€ï¼š** `DELETE /notes/{id}/like`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "å–æ¶ˆç‚¹èµæˆåŠŸ",
  "data": {
    "likeCount": 1234
  }
}
```

---

### 3.6 æ”¶è—ç¬”è®°

**æ¥å£åœ°å€ï¼š** `POST /notes/{id}/bookmark`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "æ”¶è—æˆåŠŸ",
  "data": null
}
```

---

### 3.7 å–æ¶ˆæ”¶è—ç¬”è®°

**æ¥å£åœ°å€ï¼š** `DELETE /notes/{id}/bookmark`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "å–æ¶ˆæ”¶è—æˆåŠŸ",
  "data": null
}
```

---

### 3.8 åˆ é™¤ç¬”è®°

**æ¥å£åœ°å€ï¼š** `DELETE /notes/{id}`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "åˆ é™¤æˆåŠŸ",
  "data": null
}
```

---

## å››ã€ç¬”è®°è¯„è®ºæ¨¡å—

### 4.1 è·å–ç¬”è®°è¯„è®ºåˆ—è¡¨

**æ¥å£åœ°å€ï¼š** `GET /notes/{id}/comments`

**æŸ¥è¯¢å‚æ•°ï¼š**
```
pageNum=1&pageSize=20
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "id": "10001",
        "author": "ç¾é£Ÿçˆ±å¥½è€…",
        "authorId": "2002",
        "avatar": "https://example.com/avatar2.jpg",
        "content": "çœ‹èµ·æ¥çœŸä¸é”™ï¼",
        "time": "2024-12-01 11:00:00",
        "likes": 45,
        "liked": false,
        "replyCount": 3,
        "replies": [
          {
            "id": "10002",
            "author": "ç¾é£Ÿæ¢åº—å°ç‹",
            "authorId": "2001",
            "avatar": "https://example.com/avatar.jpg",
            "content": "ç¡®å®å¾ˆå¥½åƒï¼",
            "time": "2024-12-01 11:05:00",
            "likes": 12,
            "liked": false
          }
        ]
      }
    ],
    "total": 128,
    "hasMore": true
  }
}
```

---

### 4.2 å‘è¡¨è¯„è®º

**æ¥å£åœ°å€ï¼š** `POST /notes/{id}/comments`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "content": "è¯„è®ºå†…å®¹",
  "parentId": null  // å›å¤è¯„è®ºæ—¶å¡«å†™çˆ¶è¯„è®ºID
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "è¯„è®ºæˆåŠŸ",
  "data": {
    "commentId": "10001"
  }
}
```

---

### 4.3 ç‚¹èµè¯„è®º

**æ¥å£åœ°å€ï¼š** `POST /comments/{id}/like`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "ç‚¹èµæˆåŠŸ",
  "data": {
    "likeCount": 46
  }
}
```

---

### 4.4 å–æ¶ˆç‚¹èµè¯„è®º

**æ¥å£åœ°å€ï¼š** `DELETE /comments/{id}/like`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "å–æ¶ˆç‚¹èµæˆåŠŸ",
  "data": {
    "likeCount": 45
  }
}
```

---

### 4.5 åˆ é™¤è¯„è®º

**æ¥å£åœ°å€ï¼š** `DELETE /comments/{id}`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "åˆ é™¤æˆåŠŸ",
  "data": null
}
```

---

## äº”ã€å•†å®¶æ¨¡å—

### 5.1 è·å–å•†å®¶åˆ—è¡¨

**æ¥å£åœ°å€ï¼š** `GET /shops`

**æŸ¥è¯¢å‚æ•°ï¼š**
```
category=ç¾é£Ÿ
&sortField=distance  // distance/popularity/rating/price
&sortOrder=asc  // asc/desc
&keyword=çƒ¤è‚‰
&latitude=30.2741
&longitude=120.1551
&pageNum=1
&pageSize=10
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "id": "3001",
        "name": "è”¡é¦¬æ´ªæ¶›çƒ¤è‚‰Â·è€åŒ—äº¬é“œé”…æ¶®ç¾Šè‚‰",
        "image": "https://example.com/shop1.jpg",
        "rating": 4.8,
        "reviewCount": 1234,
        "tags": ["çƒ¤è‚‰", "ç«é”…", "äººæ°”æ¦œ"],
        "location": "æ‹±å¢…åŒº",
        "address": "ä¸Šå¡˜è·¯1035å·",
        "distance": "1.2km",
        "popularity": 9876,
        "averagePrice": 120.00,
        "latitude": 30.2751,
        "longitude": 120.1561
      }
    ],
    "total": 150,
    "hasMore": true
  }
}
```

---

### 5.2 è·å–å•†å®¶è¯¦æƒ…

**æ¥å£åœ°å€ï¼š** `GET /shops/{id}`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": "3001",
    "name": "è”¡é¦¬æ´ªæ¶›çƒ¤è‚‰Â·è€åŒ—äº¬é“œé”…æ¶®ç¾Šè‚‰",
    "headerImage": "https://example.com/shop1-header.jpg",
    "images": [
      "https://example.com/shop1-1.jpg",
      "https://example.com/shop1-2.jpg"
    ],
    "description": "æ­£å®—è€åŒ—äº¬çƒ¤è‚‰ï¼Œç²¾é€‰ä¼˜è´¨é£Ÿæ...",
    "rating": 4.6,
    "reviewCount": 1460,
    "tasteScore": 4.9,
    "environmentScore": 4.8,
    "serviceScore": 4.7,
    "address": "ä¸Šå¡˜è·¯1035å·ï¼ˆä¸­å›½å·¥å•†é“¶è¡Œæ—ï¼‰",
    "businessHours": "11:30 - 03:00",
    "phone": "0571-12345678",
    "averagePrice": 120.00,
    "tags": ["çƒ¤è‚‰", "ç«é”…", "äººæ°”æ¦œ", "åœè½¦æ–¹ä¾¿"],
    "isFavorited": false,
    "latitude": 30.2751,
    "longitude": 120.1561,
    "distance": "1.2km"
  }
}
```

---

### 5.3 è·å–å•†å®¶è¯„ä»·åˆ—è¡¨

**æ¥å£åœ°å€ï¼š** `GET /shops/{id}/reviews`

**æŸ¥è¯¢å‚æ•°ï¼š**
```
pageNum=1&pageSize=10&sortBy=latest  // latest/rating
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "id": "20001",
        "author": "ç¾é£Ÿçˆ±å¥½è€…",
        "authorId": "2002",
        "avatar": "https://example.com/avatar2.jpg",
        "rating": 5.0,
        "tasteScore": 5.0,
        "environmentScore": 4.5,
        "serviceScore": 5.0,
        "date": "2024-11-30",
        "content": "å‘³é“éå¸¸æ£’ï¼Œç¯å¢ƒä¹Ÿå¾ˆå¥½ï¼",
        "images": [
          "https://example.com/review1-1.jpg",
          "https://example.com/review1-2.jpg"
        ],
        "likeCount": 23
      }
    ],
    "total": 1460,
    "hasMore": true
  }
}
```

---

### 5.4 å‘è¡¨å•†å®¶è¯„ä»·

**æ¥å£åœ°å€ï¼š** `POST /shops/{id}/reviews`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "rating": 5.0,
  "tasteScore": 5.0,
  "environmentScore": 4.5,
  "serviceScore": 5.0,
  "content": "å‘³é“éå¸¸æ£’ï¼",
  "images": [
    "https://example.com/review1.jpg",
    "https://example.com/review2.jpg"
  ]
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "è¯„ä»·æˆåŠŸ",
  "data": {
    "reviewId": "20001"
  }
}
```

---

### 5.5 æ”¶è—å•†å®¶

**æ¥å£åœ°å€ï¼š** `POST /shops/{id}/favorite`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "æ”¶è—æˆåŠŸ",
  "data": null
}
```

---

### 5.6 å–æ¶ˆæ”¶è—å•†å®¶

**æ¥å£åœ°å€ï¼š** `DELETE /shops/{id}/favorite`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "å–æ¶ˆæ”¶è—æˆåŠŸ",
  "data": null
}
```

---

## å…­ã€åˆ†ç±»æ¨¡å—

### 6.1 è·å–åˆ†ç±»åˆ—è¡¨

**æ¥å£åœ°å€ï¼š** `GET /categories`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "id": 1,
      "name": "ç¾é£Ÿ",
      "icon": "ğŸœ",
      "color": "#FFD166"
    },
    {
      "id": 2,
      "name": "KTV",
      "icon": "ğŸ¤",
      "color": "#EF476F"
    }
  ]
}
```

---

## ä¸ƒã€æ¶ˆæ¯æ¨¡å—

### 7.1 è·å–èŠå¤©åˆ—è¡¨

**æ¥å£åœ°å€ï¼š** `GET /messages/chats`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "id": "5001",
      "name": "å°çº¢",
      "userId": "2002",
      "avatar": "https://example.com/avatar2.jpg",
      "lastMessage": "è¿™å®¶åº—çœŸçš„è¶…çº§å¥½åƒï¼",
      "time": "10:30",
      "unread": 2,
      "online": true
    }
  ]
}
```

---

### 7.2 è·å–èŠå¤©æ¶ˆæ¯

**æ¥å£åœ°å€ï¼š** `GET /messages/chats/{sessionId}`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**æŸ¥è¯¢å‚æ•°ï¼š**
```
pageNum=1&pageSize=20
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "id": "60001",
        "fromUserId": "2002",
        "toUserId": "2001",
        "content": "è¿™å®¶åº—çœŸçš„è¶…çº§å¥½åƒï¼",
        "messageType": 1,
        "isRead": true,
        "createdAt": "2024-12-03 10:30:00"
      }
    ],
    "hasMore": false
  }
}
```

---

### 7.3 å‘é€æ¶ˆæ¯

**æ¥å£åœ°å€ï¼š** `POST /messages/chats/{userId}`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "content": "ä½ å¥½ï¼",
  "messageType": 1  // 1æ–‡æœ¬ï¼Œ2å›¾ç‰‡ï¼Œ3è¯­éŸ³
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "å‘é€æˆåŠŸ",
  "data": {
    "messageId": "60001"
  }
}
```

---

### 7.4 è·å–ç³»ç»Ÿé€šçŸ¥åˆ—è¡¨

**æ¥å£åœ°å€ï¼š** `GET /messages/notices`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**æŸ¥è¯¢å‚æ•°ï¼š**
```
pageNum=1&pageSize=20
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "id": "70001",
        "user": "ç¾é£Ÿè¾¾äºº",
        "userId": "2003",
        "avatar": "https://example.com/avatar3.jpg",
        "action": "ç‚¹èµäº†ä½ çš„ç¬”è®°",
        "time": "5åˆ†é’Ÿå‰",
        "icon": "â¤ï¸",
        "type": "like",
        "image": "https://example.com/note.jpg",
        "targetId": "1001",
        "isRead": false
      },
      {
        "id": "70002",
        "user": "æ¢åº—å°èƒ½æ‰‹",
        "userId": "2004",
        "avatar": "https://example.com/avatar4.jpg",
        "action": "è¯„è®ºäº†ä½ çš„ç¬”è®°",
        "time": "10åˆ†é’Ÿå‰",
        "icon": "ğŸ’¬",
        "type": "comment",
        "image": "https://example.com/note2.jpg",
        "targetId": "1002",
        "isRead": false
      },
      {
        "id": "70003",
        "user": "ç¾é£Ÿåˆ†äº«å®¶",
        "userId": "2005",
        "avatar": "https://example.com/avatar5.jpg",
        "action": "å…³æ³¨äº†ä½ ",
        "time": "1å°æ—¶å‰",
        "icon": "ğŸ‘¤",
        "type": "follow",
        "image": null,
        "targetId": null,
        "isRead": true
      }
    ],
    "total": 50,
    "unreadCount": 12,
    "hasMore": true
  }
}
```

---

### 7.5 æ ‡è®°é€šçŸ¥ä¸ºå·²è¯»

**æ¥å£åœ°å€ï¼š** `PUT /messages/notices/read`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "noticeIds": ["70001", "70002"]  // ä¸ºç©ºæ•°ç»„è¡¨ç¤ºå…¨éƒ¨å·²è¯»
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "æ ‡è®°æˆåŠŸ",
  "data": null
}
```

---

### 7.6 è·å–æœªè¯»æ¶ˆæ¯æ•°

**æ¥å£åœ°å€ï¼š** `GET /messages/unread-count`

**è¯·æ±‚å¤´ï¼š** éœ€è¦ `Authorization`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "chatUnread": 5,
    "noticeUnread": 12,
    "totalUnread": 17
  }
}
```

---

## å…«ã€ä¸Šä¼ æ¨¡å—

### 8.1 ä¸Šä¼ å›¾ç‰‡

**æ¥å£åœ°å€ï¼š** `POST /upload/image`

**è¯·æ±‚å¤´ï¼š** 
```
Content-Type: multipart/form-data
Authorization: Bearer {token}
```

**è¯·æ±‚å‚æ•°ï¼š**
```
file: å›¾ç‰‡æ–‡ä»¶ï¼ˆæ”¯æŒJPGã€PNGæ ¼å¼ï¼‰
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "ä¸Šä¼ æˆåŠŸ",
  "data": {
    "url": "https://example.com/uploads/image123.jpg"
  }
}
```

---

### 8.2 æ‰¹é‡ä¸Šä¼ å›¾ç‰‡

**æ¥å£åœ°å€ï¼š** `POST /upload/images`

**è¯·æ±‚å¤´ï¼š** 
```
Content-Type: multipart/form-data
Authorization: Bearer {token}
```

**è¯·æ±‚å‚æ•°ï¼š**
```
files: å›¾ç‰‡æ–‡ä»¶æ•°ç»„ï¼ˆæœ€å¤š9å¼ ï¼‰
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "ä¸Šä¼ æˆåŠŸ",
  "data": {
    "urls": [
      "https://example.com/uploads/image123.jpg",
      "https://example.com/uploads/image124.jpg"
    ]
  }
}
```

---

## ä¹ã€è¯é¢˜æ¨¡å—

### 9.1 è·å–çƒ­é—¨è¯é¢˜

**æ¥å£åœ°å€ï¼š** `GET /topics/hot`

**æŸ¥è¯¢å‚æ•°ï¼š**
```
pageNum=1&pageSize=10
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "id": "8001",
        "name": "æ­å·ç¾é£Ÿæ¢åº—",
        "description": "åˆ†äº«æ­å·åœ°åŒºçš„ç¾é£Ÿæ¢åº—ä½“éªŒ",
        "coverImage": "https://example.com/topic1.jpg",
        "noteCount": 12345,
        "viewCount": 567890,
        "isHot": true
      }
    ],
    "hasMore": true
  }
}
```

---

### 9.2 æœç´¢è¯é¢˜

**æ¥å£åœ°å€ï¼š** `GET /topics/search`

**æŸ¥è¯¢å‚æ•°ï¼š**
```
keyword=ç¾é£Ÿ&pageNum=1&pageSize=10
```

**å“åº”ç¤ºä¾‹ï¼š** åŒ9.1

---

## åã€åœ°å›¾æ¨¡å—

### 10.1 è·å–é™„è¿‘å•†å®¶

**æ¥å£åœ°å€ï¼š** `GET /map/nearby-shops`

**æŸ¥è¯¢å‚æ•°ï¼š**
```
latitude=30.2741
&longitude=120.1551
&category=ç¾é£Ÿ
&radius=5000  // æœç´¢åŠå¾„ï¼ˆç±³ï¼‰
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "id": "3001",
      "name": "è”¡é¦¬æ´ªæ¶›çƒ¤è‚‰",
      "rating": 4.6,
      "reviewCount": 1460,
      "distance": "170m",
      "image": "https://example.com/shop1.jpg",
      "latitude": 30.2751,
      "longitude": 120.1561,
      "tags": ["çƒ¤è‚‰", "ç«é”…"]
    }
  ]
}
```

---

## åä¸€ã€æœç´¢æ¨¡å—

### 11.1 ç»¼åˆæœç´¢

**æ¥å£åœ°å€ï¼š** `GET /search`

**æŸ¥è¯¢å‚æ•°ï¼š**
```
keyword=çƒ¤è‚‰
&type=all  // all/note/shop
&pageNum=1
&pageSize=10
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "notes": {
      "list": [],
      "total": 50
    },
    "shops": {
      "list": [],
      "total": 30
    }
  }
}
```

---

### 11.2 æœç´¢å»ºè®®

**æ¥å£åœ°å€ï¼š** `GET /search/suggest`

**æŸ¥è¯¢å‚æ•°ï¼š**
```
keyword=çƒ¤
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "suggestions": [
      "çƒ¤è‚‰",
      "çƒ¤é±¼",
      "çƒ¤ä¸²"
    ]
  }
}
```

---

### 11.3 çƒ­é—¨æœç´¢

**æ¥å£åœ°å€ï¼š** `GET /search/hot`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "hotWords": [
      "ç«é”…",
      "çƒ§çƒ¤",
      "æ—¥æ–™",
      "è¥¿é¤"
    ]
  }
}
```

---

## é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | è¯´æ˜ |
|-------|------|
| 40001 | æ‰‹æœºå·æ ¼å¼é”™è¯¯ |
| 40002 | éªŒè¯ç é”™è¯¯æˆ–å·²è¿‡æœŸ |
| 40003 | ç”¨æˆ·ä¸å­˜åœ¨ |
| 40004 | å‚æ•°ç¼ºå¤± |
| 40101 | æœªç™»å½• |
| 40102 | Tokenå·²è¿‡æœŸ |
| 40103 | Tokenæ— æ•ˆ |
| 40301 | æ— æƒé™æ“ä½œ |
| 40401 | èµ„æºä¸å­˜åœ¨ |
| 40402 | ç¬”è®°ä¸å­˜åœ¨ |
| 40403 | å•†å®¶ä¸å­˜åœ¨ |
| 50001 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |
| 50002 | æ•°æ®åº“é”™è¯¯ |

---

## é™„å½•

### æ—¶é—´æ ¼å¼

- æ‰€æœ‰æ—¶é—´å­—æ®µç»Ÿä¸€ä½¿ç”¨ISO 8601æ ¼å¼ï¼š`YYYY-MM-DD HH:mm:ss`
- ç›¸å¯¹æ—¶é—´å±•ç¤ºï¼šåˆšåˆšã€5åˆ†é’Ÿå‰ã€1å°æ—¶å‰ã€æ˜¨å¤©ã€2024-12-01

### å›¾ç‰‡è§„æ ¼

- å¤´åƒï¼š200x200 ~ 400x400
- ç¬”è®°å°é¢ï¼š800x1000ï¼ˆ4:5æ¯”ä¾‹ï¼‰
- å•†å®¶å°é¢ï¼š1200x800ï¼ˆ3:2æ¯”ä¾‹ï¼‰
- å›¾ç‰‡æ ¼å¼ï¼šJPGã€PNG
- å•å¼ å›¾ç‰‡å¤§å°ï¼šä¸è¶…è¿‡5MB

### åˆ†é¡µè¯´æ˜

- é»˜è®¤æ¯é¡µ10æ¡æ•°æ®
- æœ€å¤§æ¯é¡µ50æ¡æ•°æ®
- è¿”å›hasMoreå­—æ®µè¡¨ç¤ºæ˜¯å¦è¿˜æœ‰æ›´å¤šæ•°æ®

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.0.0  
**æœ€åæ›´æ–°ï¼š** 2024-12-03
