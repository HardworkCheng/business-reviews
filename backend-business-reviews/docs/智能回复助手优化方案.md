你是一位精通 Java Spring Boot 和 LangChain4j 的高级后端架构师。
我们之前已经实现了一个“差评回复助手”，现在我需要你帮助我**重构并升级**这个功能，将其扩展为“全场景用户评论智能回复助手”。

### 1. 升级目标
原来的逻辑只处理差评。现在的逻辑需要能够**自动识别**用户评论是“好评”还是“差评”，并采用完全不同的回复策略：
- **如果是好评**：回复风格要热情、感激、俏皮，重在“建立连接”和“鼓励复购”。
- **如果是差评**：保持之前的逻辑（致歉-共情-改进-补偿），重在“安抚情绪”和“挽回流失”。

### 2. 技术要求
- **框架**: LangChain4j (基于当前项目)
- **注解**: 继续使用 `@AiService`, `@SystemMessage`, `@UserMessage`。
- **输入参数**: 保持不变，依然是 `reviewText` (评论内容) 和 `strategy` (商家设定的赠礼/优惠策略，可选)。

### 3. 代码重构指南

**Step 1: 修改 AI 服务接口 (SmartReplyAgent)**
请重构或新建接口 `SmartReplyAgent`。
核心在于 `@SystemMessage` 的 Prompt 编写，请按照以下逻辑编写 Prompt：

* **角色设定**：你是一位高情商的商家运营经理。
* **思维链 (Chain of Thought)**：
    1.  **情感判断**：首先分析用户评论的情感倾向（正面/中性 vs 负面）。
    2.  **策略分支**：
        * **Case A (好评/夸奖)**：
            * 语气：开心、激动、感激 (🥰, ❤️, 🎉)。
            * 内容：感谢用户的认可，复述用户夸奖的点（如“听到您喜欢我们的红烧肉真是太开心啦”），如果有 `strategy` (如送券)，则作为“惊喜礼物”送出。
            * 结尾：期待再次光临。
        * **Case B (差评/吐槽)**：
            * 语气：诚恳、严肃、抱歉 (😭, 😔, 🙏)。
            * 内容：标准公关流程（致歉 -> 共情 -> 改进措施）。如果有 `strategy` (如送券)，则作为“补偿”送出。
            * 结尾：再次致歉并希望能挽回。
* **约束**：无论好评差评，回复字数控制在 100-150 字之间。

**Step 2: 调整 Service 逻辑**
更新 Service 层代码。

- 如果之前有针对差评的特定硬编码逻辑（比如强制加“对不起”的前缀），请移除，完全交给 AI 根据 Prompt 动态生成。
- 确保 `strategy` 字段能够灵活融入两种场景（好评时是“锦上添花”，差评时是“雪中送炭”）。

### 4. 期望输出示例 (让 AI 理解区别)

* **场景 1 (好评)**
    * Input: 评论="味道太赞了，尤其是干锅鸡！"，策略="送饮料券"
    * Output: "哇！看到同学这么喜欢我们的干锅鸡，老板简直开心得想转圈圈！🥰 您的认可是我们最大的动力！为了感谢您的支持，下次来吃饭送您一张饮料券哦 🥤，期待您带朋友常来！"

* **场景 2 (差评)**
    * Input: 评论="上菜太慢了，等了半小时。"，策略="送饮料券"
    * Output: "非常抱歉给您带来不好的体验！😔 让你饿着肚子等了这么久，不仅是身体难受，心情肯定也受影响，真是对不起。我们已经在这个问题上狠狠批评了后厨。为了表达歉意，送您一张饮料券，希望能消消气，给我们一个改进的机会！🙏"

请给出重构后的 `SmartReplyAgent` 接口代码以及更新后的 Prompt。

------

### 💡 核心优化点解读 (Prompt Engineering)

关键在于教 AI 学会 **“Conditioning Generation” (条件生成)**。

1. **思维链 (Chain of Thought)**： 我没有让 Java 代码去判断好评差评（不需要引入额外的 NLP 库），而是直接让 **大模型自己判断**。
   - Prompt 指令：“首先分析用户评论的情感倾向... Case A... Case B...”
   - 这样可以节省开发成本，逻辑更灵活（比如遇到“味道不错但有点贵”这种中性评论，AI 能处理得更自然）。
2. **策略复用 (`strategy` 字段)**：
   - 在**差评**里，优惠券叫“补偿/赔罪”。
   - 在**好评**里，优惠券叫“惊喜/回馈”。
   - 提示词中明确指出了这两种语境的区别，防止 AI 在好评里说“为了表达歉意送您优惠券”，那就搞笑了。