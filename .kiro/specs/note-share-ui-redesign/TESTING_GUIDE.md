# 笔记分享页面测试指南

## 🧪 测试清单

### 1. Bottom Sheet 弹窗测试

#### 1.1 打开动画
- [ ] 进入页面时，弹窗从底部平滑滑入
- [ ] 遮罩层从透明渐变到半透明黑色
- [ ] 动画时长约 300ms，流畅无卡顿

#### 1.2 关闭功能
- [ ] 点击关闭按钮（✕）可关闭弹窗
- [ ] 点击遮罩层可关闭弹窗
- [ ] 关闭时弹窗平滑滑出到底部
- [ ] 关闭后返回上一页

#### 1.3 样式检查
- [ ] 弹窗背景为白色
- [ ] 顶部圆角（40rpx）
- [ ] 标题显示"分享给"
- [ ] 关闭按钮在右上角

### 2. 用户列表测试

#### 2.1 列表合并去重
- [ ] 同时是关注者和粉丝的用户只出现一次
- [ ] 所有关注的用户都显示
- [ ] 所有粉丝都显示（去重后）
- [ ] 用户顺序合理

#### 2.2 横向滚动
- [ ] 用户列表可以横向滚动
- [ ] 滚动流畅，无卡顿
- [ ] 用户卡片间距均匀（24rpx）
- [ ] 左右有适当的内边距（30rpx）

#### 2.3 用户卡片样式
- [ ] 头像为圆形（100rpx × 100rpx）
- [ ] 昵称在头像下方
- [ ] 昵称过长时显示省略号
- [ ] 卡片布局整齐

### 3. 在线状态测试

#### 3.1 在线状态显示
- [ ] 在线用户头像右下角显示绿色小圆点
- [ ] 圆点大小合适（20rpx）
- [ ] 圆点颜色为绿色（#52c41a）
- [ ] 圆点有白色边框区分背景

#### 3.2 离线状态
- [ ] 离线用户不显示绿色圆点
- [ ] 无在线状态数据时不显示圆点

### 4. 选中状态测试

#### 4.1 选中交互
- [ ] 点击头像可选中用户
- [ ] 再次点击可取消选中
- [ ] 可以选中多个用户
- [ ] 选中操作响应迅速

#### 4.2 选中视觉反馈
- [ ] 选中时头像上显示半透明黑色覆盖层
- [ ] 显示白色对勾图标（✓）
- [ ] 头像边框变为橙色（#ff9f43）
- [ ] 选中动画流畅（checkIn animation）

#### 4.3 选中计数
- [ ] 底部显示"已选择 X 人"
- [ ] 数字实时更新
- [ ] 未选中时显示"已选择 0 人"

### 5. 搜索功能测试

#### 5.1 搜索交互
- [ ] 输入关键词可搜索用户
- [ ] 搜索用户名有效
- [ ] 搜索个人简介有效
- [ ] 搜索不区分大小写

#### 5.2 搜索结果
- [ ] 搜索结果正确过滤
- [ ] 清空搜索框恢复完整列表
- [ ] 搜索无结果时显示"未找到匹配用户"
- [ ] 搜索有防抖效果（不会频繁触发）

### 6. 笔记预览测试

#### 6.1 笔记信息显示
- [ ] 显示笔记封面图
- [ ] 显示笔记标题
- [ ] 显示笔记内容预览（2行）
- [ ] 布局美观

#### 6.2 错误处理
- [ ] 封面图加载失败时显示默认图
- [ ] 无标题时显示"无标题"
- [ ] 无内容时显示"暂无内容"

### 7. 分享功能测试

#### 7.1 分享按钮状态
- [ ] 未选中用户时按钮为灰色禁用状态
- [ ] 选中用户后按钮变为橙色可用状态
- [ ] 分享中时按钮显示"分享中..."
- [ ] 分享中时按钮禁用，防止重复点击

#### 7.2 分享流程
- [ ] 点击分享按钮显示加载提示
- [ ] 分享成功显示"分享成功"提示
- [ ] 分享成功后自动关闭弹窗
- [ ] 分享失败显示错误信息
- [ ] 分享失败后弹窗保持打开

### 8. 错误处理测试

#### 8.1 网络错误
- [ ] 获取笔记数据失败时显示提示
- [ ] 获取用户列表失败时显示提示
- [ ] 分享失败时显示错误信息
- [ ] 错误提示文案清晰友好

#### 8.2 空状态
- [ ] 无关注者和粉丝时显示空状态
- [ ] 空状态图标和文案清晰
- [ ] 搜索无结果时显示提示

#### 8.3 图片加载
- [ ] 头像加载失败时使用默认头像
- [ ] 笔记封面加载失败时使用默认图
- [ ] 默认图显示正常

### 9. 响应式测试

#### 9.1 不同屏幕尺寸
- [ ] iPhone SE (小屏) 显示正常
- [ ] iPhone 14 Pro (中屏) 显示正常
- [ ] iPad (大屏) 显示正常
- [ ] 弹窗高度自适应（最大 80vh）

#### 9.2 安全区域
- [ ] 底部操作栏适配安全区域
- [ ] iPhone X 及以上机型底部留白正常

### 10. 性能测试

#### 10.1 加载性能
- [ ] 页面打开速度快（< 1s）
- [ ] 用户列表加载流畅
- [ ] 图片加载不阻塞交互

#### 10.2 滚动性能
- [ ] 横向滚动流畅，无卡顿
- [ ] 大量用户时（50+）滚动仍流畅
- [ ] 动画帧率稳定（60fps）

#### 10.3 内存占用
- [ ] 页面内存占用合理
- [ ] 关闭页面后内存正常释放

## 🔍 测试场景

### 场景 1: 正常分享流程
1. 打开笔记详情页
2. 点击分享按钮
3. 弹窗从底部滑入
4. 浏览用户列表
5. 选中 2-3 个用户
6. 点击分享按钮
7. 显示"分享成功"
8. 弹窗关闭，返回上一页

### 场景 2: 搜索后分享
1. 打开分享弹窗
2. 在搜索框输入关键词
3. 查看过滤后的用户列表
4. 选中搜索结果中的用户
5. 清空搜索框
6. 确认选中状态保持
7. 点击分享

### 场景 3: 取消分享
1. 打开分享弹窗
2. 选中几个用户
3. 点击遮罩层
4. 弹窗关闭
5. 返回上一页

### 场景 4: 空列表处理
1. 使用没有关注者和粉丝的账号
2. 打开分享弹窗
3. 显示空状态提示
4. 提示文案友好

### 场景 5: 网络错误处理
1. 断开网络
2. 打开分享弹窗
3. 显示加载失败提示
4. 恢复网络
5. 重新加载

## 📱 测试平台

### 必测平台
- [ ] 微信小程序 (iOS)
- [ ] 微信小程序 (Android)
- [ ] H5 (移动端浏览器)

### 可选平台
- [ ] App (iOS)
- [ ] App (Android)
- [ ] 支付宝小程序
- [ ] 百度小程序

## 🐛 已知问题

目前无已知问题。

## ✅ 测试结论

- [ ] 所有核心功能正常
- [ ] UI 显示符合设计稿
- [ ] 交互流畅无卡顿
- [ ] 错误处理完善
- [ ] 性能表现良好

## 📝 测试报告模板

```
测试日期: YYYY-MM-DD
测试人员: [姓名]
测试平台: [微信小程序/H5/App]
测试设备: [设备型号]

通过项: X / Y
失败项: Z

问题列表:
1. [问题描述]
   - 复现步骤: ...
   - 预期结果: ...
   - 实际结果: ...
   - 严重程度: [高/中/低]

总体评价: [通过/不通过]
```

## 🚀 上线前检查

- [ ] 所有测试用例通过
- [ ] 代码已提交到版本控制
- [ ] 已在多个设备上测试
- [ ] 性能指标达标
- [ ] 无严重 bug
- [ ] 产品经理已验收
- [ ] 准备好回滚方案
